import {get} from "../utils/api";

export function isPointInsidePolygon(p, polygon) {
    var isInside = false;
    var minX = polygon[0].x, maxX = polygon[0].x;
    var minY = polygon[0].y, maxY = polygon[0].y;
    for (var n = 1; n < polygon.length; n++) {
        var q = polygon[n];
        minX = Math.min(q.x, minX);
        maxX = Math.max(q.x, maxX);
        minY = Math.min(q.y, minY);
        maxY = Math.max(q.y, maxY);
    }

    if (p.x < minX || p.x > maxX || p.y < minY || p.y > maxY) {
        return false;
    }

    var i = 0, j = polygon.length - 1;
    for (i, j; i < polygon.length; j = i++) {
        if ( (polygon[i].y > p.y) != (polygon[j].y > p.y) &&
                p.x < (polygon[j].x - polygon[i].x) * (p.y - polygon[i].y) / (polygon[j].y - polygon[i].y) + polygon[i].x ) {
            isInside = !isInside;
        }
    }

    return isInside;
}

export async function getShippingCost(locationPoint) {
  try {
    let response = await get(`selfdelivery/getShippingCost?coordinates=${locationPoint.x},${locationPoint.y}`, {}, true);
    return {error: '', response: response};
  } catch (e) {
    return {error: e.message};
  }
}

export const mapBoundingBox = [
  {x: 6.804487, y: 79.869825},
  {x: 6.818173, y: 79.898516},
  {x: 6.821261, y: 79.909691},
  {x: 6.823305, y: 79.918618},
  {x: 6.831571, y: 79.927889},
  {x: 6.834773, y: 79.932295},
  {x: 6.838778, y: 79.934012},
  {x: 6.842783, y: 79.939420},
  {x: 6.866304, y: 79.931266},
  {x: 6.869004, y: 79.935935},
  {x: 6.868365, y: 79.941815},
  {x: 6.866320, y: 79.945419},
  {x: 6.870751, y: 79.955291},
  {x: 6.879612, y: 79.947523},
  {x: 6.883873, y: 79.941343},
  {x: 6.907557, y: 79.929765},
  {x: 6.915226, y: 79.927104},
  {x: 6.908224, y: 79.911527},
  {x: 6.915723, y: 79.906806},
  {x: 6.916733, y: 79.895844},
  {x: 6.923720, y: 79.891724},
  {x: 6.924018, y: 79.886660},
  {x: 6.927039, y: 79.877849},
  {x: 6.927039, y: 79.877678},
  {x: 6.930192, y: 79.868321},
  {x: 6.931641, y: 79.855876},
  {x: 6.938164, y: 79.847636},
  {x: 6.938505, y: 79.840426},
  {x: 6.929340, y: 79.841370},
  {x: 6.923973, y: 79.844202},
  {x: 6.913918, y: 79.847121},
  {x: 6.879324, y: 79.855703},
  {x: 6.848646, y: 79.861883},
  {x: 6.835050, y: 79.862637},
  {x: 6.830108, y: 79.861950},
  {x: 6.803688, y: 79.869674},
]

export const mapBoundingBoxInLatLon = mapBoundingBox.map(location => { return {latitude: location.x, longitude: location.y}})

export const mapBoundingBox2 = [
  {x: 6.716456, y: 79.901323},
  {x: 6.718673, y: 79.902696},
  {x: 6.720378, y: 79.903211},
  {x: 6.722935, y: 79.902868},
  {x: 6.726174, y: 79.901838},
  {x: 6.729754, y: 79.900808},
  {x: 6.733164, y: 79.899950},
  {x: 6.737255, y: 79.899263},
  {x: 6.740324, y: 79.898062},
  {x: 6.744756, y: 79.895487},
  {x: 6.748165, y: 79.894457},
  {x: 6.751745, y: 79.894113},
  {x: 6.756050, y: 79.891839},
  {x: 6.758180, y: 79.891753},
  {x: 6.760056, y: 79.891667},
  {x: 6.762186, y: 79.891581},
  {x: 6.763550, y: 79.891925},
  {x: 6.764488, y: 79.891925},
  {x: 6.765766, y: 79.890895},
  {x: 6.766704, y: 79.889951},
  {x: 6.767556, y: 79.888921},
  {x: 6.768835, y: 79.887805},
  {x: 6.770369, y: 79.886689},
  {x: 6.772606, y: 79.885766},
  {x: 6.773842, y: 79.885938},
  {x: 6.774694, y: 79.886024},
  {x: 6.775504, y: 79.885981},
  {x: 6.776314, y: 79.885938},
  {x: 6.776612, y: 79.886410},
  {x: 6.777209, y: 79.886839},
  {x: 6.778061, y: 79.886796},
  {x: 6.778615, y: 79.886410},
  {x: 6.779382, y: 79.886775},
  {x: 6.779616, y: 79.887333},
  {x: 6.779915, y: 79.887655},
  {x: 6.780298, y: 79.887698},
  {x: 6.780767, y: 79.887762},
  {x: 6.780959, y: 79.887955},
  {x: 6.779361, y: 79.890294},
  {x: 6.779041, y: 79.890873},
  {x: 6.778849, y: 79.891581},
  {x: 6.778977, y: 79.891817},
  {x: 6.779190, y: 79.892053},
  {x: 6.779190, y: 79.892053},
  {x: 6.779616, y: 79.892697},
  {x: 6.779680, y: 79.892998},
  {x: 6.779723, y: 79.893341},
  {x: 6.779723, y: 79.893620},
  {x: 6.779233, y: 79.893985},
  {x: 6.779233, y: 79.894349},
  {x: 6.779680, y: 79.894585},
  {x: 6.779169, y: 79.895294},
  {x: 6.778807, y: 79.896045},
  {x: 6.778359, y: 79.896409},
  {x: 6.777656, y: 79.897225},
  {x: 6.777059, y: 79.897589},
  {x: 6.776420, y: 79.898341},
  {x: 6.775802, y: 79.898984},
  {x: 6.775525, y: 79.900100},
  {x: 6.774652, y: 79.900658},
  {x: 6.773586, y: 79.902010},
  {x: 6.773650, y: 79.902696},
  {x: 6.774012, y: 79.902911},
  {x: 6.775035, y: 79.903040},
  {x: 6.775397, y: 79.903555},
  {x: 6.774630, y: 79.904585},
  {x: 6.774929, y: 79.905121},
  {x: 6.775483, y: 79.905228},
  {x: 6.768153, y: 79.909979},
  {x: 6.758383, y: 79.920010},
  {x: 6.758638, y: 79.927735},
  {x: 6.758175, y: 79.933180},
  {x: 6.759027, y: 79.940046},
  {x: 6.764226, y: 79.953608},
  {x: 6.765419, y: 79.962534},
  {x: 6.768573, y: 79.970087},
  {x: 6.773431, y: 79.971975},
  {x: 6.767721, y: 79.983992},
  {x: 6.763459, y: 80.003389},
  {x: 6.766783, y: 80.008539},
  {x: 6.778460, y: 80.010599},
  {x: 6.794398, y: 79.997381},
  {x: 6.801298, y: 80.019554},
  {x: 6.845859, y: 80.027504},
  {x: 6.865331, y: 80.022225},
  {x: 6.878683, y: 80.007603},
  {x: 6.881687, y: 79.992046},
  {x: 6.898697, y: 79.983971},
  {x: 6.903213, y: 79.981397},
  {x: 6.911819, y: 79.982942},
  {x: 6.918294, y: 79.985345},
  {x: 6.920424, y: 79.983542},
  {x: 6.921873, y: 79.980624},
  {x: 6.921873, y: 79.983714},
  {x: 6.925707, y: 79.989293},
  {x: 6.929967, y: 79.992984},
  {x: 6.933887, y: 79.992726},
  {x: 6.934194, y: 79.992832},
  {x: 6.938880, y: 79.982832},
  {x: 6.939519, y: 79.979614},
  {x: 6.939519, y: 79.971846},
  {x: 6.940087, y: 79.962472},
  {x: 6.940449, y: 79.949747},
  {x: 6.950520, y: 79.930029},
  {x: 6.966026, y: 79.928999},
  {x: 6.972897, y: 79.931554},
  {x: 6.978254, y: 79.932144},
  {x: 6.984260, y: 79.927659},
  {x: 6.980224, y: 79.921769},
  {x: 6.980667, y: 79.878892},
  {x: 6.979645, y: 79.869278},
  {x: 6.976817, y: 79.869509},
  {x: 6.968808, y: 79.868135},
  {x: 6.965230, y: 79.863501},
  {x: 6.961822, y: 79.856634},
  {x: 6.953132, y: 79.853887},
  {x: 6.947338, y: 79.852343},
  {x: 6.942226, y: 79.849939},
  {x: 6.938137, y: 79.847536},
  {x: 6.938152, y: 79.840241},
  {x: 6.928274, y: 79.841893},
  {x: 6.926656, y: 79.843352},
  {x: 6.888227, y: 79.853909},
  {x: 6.880728, y: 79.855411},
  {x: 6.875658, y: 79.856698},
  {x: 6.872676, y: 79.857557},
  {x: 6.865858, y: 79.858930},
  {x: 6.863984, y: 79.859359},
  {x: 6.862109, y: 79.859273},
  {x: 6.859893, y: 79.859660},
  {x: 6.856314, y: 79.860389},
  {x: 6.853204, y: 79.860904},
  {x: 6.851585, y: 79.861333},
  {x: 6.848900, y: 79.861977},
  {x: 6.846983, y: 79.861805},
  {x: 6.845279, y: 79.861934},
  {x: 6.844213, y: 79.862063},
  {x: 6.840591, y: 79.862449},
  {x: 6.837694, y: 79.862921},
  {x: 6.836032, y: 79.862707},
  {x: 6.835777, y: 79.862578},
  {x: 6.834967, y: 79.862792},
  {x: 6.834456, y: 79.862320},
  {x: 6.834173, y: 79.861510},
  {x: 6.833694, y: 79.861146},
  {x: 6.832916, y: 79.861403},
  {x: 6.832394, y: 79.861639},
  {x: 6.832085, y: 79.861779},
  {x: 6.831212, y: 79.861843},
  {x: 6.830583, y: 79.862047},
  {x: 6.830019, y: 79.862208},
  {x: 6.829326, y: 79.862412},
  {x: 6.827728, y: 79.862690},
  {x: 6.826908, y: 79.862798},
  {x: 6.826407, y: 79.862884},
  {x: 6.825353, y: 79.862766},
  {x: 6.824852, y: 79.862830},
  {x: 6.823915, y: 79.863120},
  {x: 6.822828, y: 79.863592},
  {x: 6.821038, y: 79.864461},
  {x: 6.818748, y: 79.865222},
  {x: 6.817022, y: 79.865737},
  {x: 6.816191, y: 79.865952},
  {x: 6.813635, y: 79.866714},
  {x: 6.812058, y: 79.867175},
  {x: 6.811312, y: 79.867443},
  {x: 6.809874, y: 79.868001},
  {x: 6.807605, y: 79.868613},
  {x: 6.806273, y: 79.869031},
  {x: 6.804793, y: 79.869750},
  {x: 6.803514, y: 79.870179},
  {x: 6.799999, y: 79.871038},
  {x: 6.796451, y: 79.872239},
  {x: 6.794437, y: 79.872690},
  {x: 6.792296, y: 79.873527},
  {x: 6.789558, y: 79.874353},
  {x: 6.788205, y: 79.874771},
  {x: 6.787715, y: 79.874814},
  {x: 6.787449, y: 79.874750},
  {x: 6.786895, y: 79.875007},
  {x: 6.782090, y: 79.876295},
  {x: 6.781866, y: 79.876370},
  {x: 6.779778, y: 79.877121},
  {x: 6.778361, y: 79.877614},
  {x: 6.776252, y: 79.878698},
  {x: 6.773918, y: 79.879385},
  {x: 6.772821, y: 79.879642},
  {x: 6.770903, y: 79.880447},
  {x: 6.770392, y: 79.880275},
  {x: 6.768336, y: 79.881326},
  {x: 6.766940, y: 79.882303},
  {x: 6.766439, y: 79.882356},
  {x: 6.766088, y: 79.882163},
  {x: 6.765928, y: 79.881874},
  {x: 6.765896, y: 79.882196},
  {x: 6.765619, y: 79.882496},
  {x: 6.764511, y: 79.882904},
  {x: 6.763605, y: 79.882989},
  {x: 6.762923, y: 79.883301},
  {x: 6.760825, y: 79.884191},
  {x: 6.757053, y: 79.885747},
  {x: 6.753644, y: 79.887281},
  {x: 6.753430, y: 79.887260},
  {x: 6.752962, y: 79.887420},
  {x: 6.752067, y: 79.887785},
  {x: 6.751097, y: 79.888171},
  {x: 6.749851, y: 79.888665},
  {x: 6.748252, y: 79.889266},
  {x: 6.747997, y: 79.889094},
  {x: 6.746111, y: 79.890017},
  {x: 6.744662, y: 79.890714},
  {x: 6.742478, y: 79.891497},
  {x: 6.740879, y: 79.892173},
  {x: 6.738376, y: 79.893085},
  {x: 6.736948, y: 79.893547},
  {x: 6.734412, y: 79.894480},
  {x: 6.733144, y: 79.894952},
  {x: 6.730310, y: 79.896100},
  {x: 6.727646, y: 79.897055},
  {x: 6.723704, y: 79.898557},
  {x: 6.721786, y: 79.899319},
  {x: 6.719751, y: 79.900220},
]

export const mapBoundingBox2InLatLon = mapBoundingBox2.map(location => { return {latitude: location.x, longitude: location.y}})
